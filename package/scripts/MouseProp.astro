---
export interface Props {
    selector?: string;
    attach?: string;
    property?: string;
}

const {
    selector=":root",
    attach=selector,
    property="mouse"
} = Astro.props as Props
---

<script define:vars={{
    s: selector,
    a: attach,
    x: `--${property}X`,
    y: `--${property}Y`
}}>
    const t = document.querySelector(a)
    const e = [":root", "html", "body"].includes(s)?window:document.querySelector(s)
    const b = e===t
    e.addEventListener('mousemove', (v) => {
        t.style.setProperty(x, b?v.offsetX:v.clientX);
        t.style.setProperty(y, b?v.offsetY:v.clientY);
    }, false);
</script>
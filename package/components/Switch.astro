---
export interface Props {
    name?: string;
    default?: string;
    key?: string;
    args?: Record<string, any>;
}

const {
    name,
    default: _default='default',
    key=_default,
    args
} = Astro.props as Props


let html;
if (!name) {
    html = await Astro.slots.render(_default);
    const slots = Object.keys(Astro.slots)
        .filter(i => Number.isInteger(+i))
        .sort((a, b) => +a - +b)
    for (let slot of slots) {
        let _html = await Astro.slots.render(slot)
        if (_html) {
            html = _html
            break
        }
    }
}
---


{() => {
    return !name
        ? <Fragment set:html={html}/>
        : Astro.slots.has(name)
            ? args && (args[name] || args[key])
                ? <Fragment set:html={Astro.slots.render(name, [args[name] || args[key]])}/>
                : <Fragment set:html={Astro.slots.render(name)}/>
            : args && args[key]
                ? <Fragment set:html={Astro.slots.render(_default, [args[key]])}/>
                : <Fragment set:html={Astro.slots.render(_default)}/>
}}
---
import { HTMLAttributes } from 'astro/types';
import { Link } from '../index';

interface ActiveProps extends HTMLAttributes<'a'> {
    text?: string;
}

interface LinkProps extends HTMLAttributes<'a'> {
    text?: string;
    active?: ActiveProps;
    mode?: 'join'|'spread'|'replace';
}

export interface Props {
    links: LinkProps[], // Array of Link objects to create navigation from
    active: ActiveProps, // Global active attributes (Applies to all elements)
    mode?: 'join'|'spread'|'replace';
}

const {
    links,
    active,
    mode
} = Astro.props
---

{ links.map(link => {
    const attrs = { active, mode, ...link };
    if (Object.keys(Astro.slots).length > 0) {
        if (Astro.url.pathname === link.href && Astro.slots.has('active')) return <Fragment set:html={Astro.slots.render('active', [attrs])}/>
        return <Fragment set:html={Astro.slots.render('default', [attrs])}/>
    }
    return <Link {...attrs}/>
})}
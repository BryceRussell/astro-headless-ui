---
import Base from '@/layouts/Base.astro';
import { Paginate, Pagination } from 'astro-headless-ui';

const posts = await fetch('https://jsonplaceholder.typicode.com/posts').then(response => response.json())
---

<Base>
    <h1>Pagination</h1>
    <h3>Current Page: 1 (index)</h3>
    <Paginate data={posts} size="10" page={Astro.params.page}>
        { page => (
            <nav>
                <Pagination index url="/pagination" total={page.last} current={page.current}>
                    <f slot="active">{page => <span>{page.number}</span>}</f>
                    <f slot="disabled">{() => <span>...</span>}</f>
                    {page => <a href={page.href}>{page.number}</a>}
                </Pagination>
            </nav>
            <section>
                { page.data.map(post => (
                    <article>
                        <h2>{post.id} - {post.title}</h2>
                        <p>{post.body}</p>
                    </article>
                ))}
            </section>
            <nav>
                <Pagination index url="/pagination" total={page.last} current={page.current}>
                    <f slot="active">{page => <span>{page.number}</span>}</f>
                    <f slot="disabled">{() => <span>...</span>}</f>
                    {page => <a href={page.href}>{page.number}</a>}
                </Pagination>
            </nav>
        )}
    </Paginate>
</Base>

<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
    }

    section {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin: 1rem 0;
    }

    article {
        padding: 0 1rem;
        border: 2px solid currentColor;
    }

    nav {
        display: flex;
        align-items: center;
        gap: .25rem;
    }

    nav > a,
    nav > span {
        text-decoration: none;
        border-radius: 3px;
        border: 2px solid currentColor;
        padding: .25rem .6rem;
    }

    nav > a:hover,
    nav > span:hover {
        filter: brightness(75%);
    }
</style>